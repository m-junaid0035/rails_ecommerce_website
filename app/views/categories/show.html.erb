<h1 class="text-3xl font-bold text-center mt-6">Category Show Page</h1>

<div class="min-h-screen px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto flex flex-col md:flex-row gap-10 mt-6">

  <!-- Filter Sidebar -->
  <aside class="md:w-64 flex-shrink-0 bg-gray-50 p-6 rounded-lg shadow">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Filter</h2>

    <%= form_with url: category_path(@category), method: :get, class: "flex flex-col" do |form| %>
      <%= form.number_field :min, placeholder: "Min Price", class: "border border-gray-300 rounded-md p-2 mb-3 focus:outline-none focus:ring-2 focus:ring-gray-600" %>
      <%= form.number_field :max, placeholder: "Max Price", class: "border border-gray-300 rounded-md p-2 mb-4 focus:outline-none focus:ring-2 focus:ring-gray-600" %>
      <%= form.submit "Filter", class: "bg-gray-800 text-white rounded-md py-2 hover:bg-gray-900 transition cursor-pointer" %>
    <% end %>

    <%= form_with url: category_path(@category), method: :get, class: "mt-4" do |form| %>
      <%= form.submit "Clear", class: "bg-gray-600 text-white rounded-md py-2 hover:bg-gray-700 transition cursor-pointer w-full" %>
    <% end %>
  </aside>

  <!-- Products Grid -->
  <main class="flex-grow">
    <% if @products.empty? %>
      <p class="text-2xl text-gray-700 text-center mt-10">No products found</p>
    <% else %>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
        <% @products.each do |product| %>
          <%= link_to product_path(product), class: "group block bg-white rounded-lg shadow hover:shadow-lg transition overflow-hidden" do %>
            <div class="w-full h-64 bg-gray-100 flex justify-center items-center p-4">
              <% if product.images.first.present? %>
                <%= image_tag product.images.first.variant(resize_to_limit: [250, 250]), alt: product.name, class: "object-contain max-h-full max-w-full" %>
              <% else %>
                <%= image_tag "http://via.placeholder.com/250", alt: "Placeholder", class: "object-contain max-h-full max-w-full" %>
              <% end %>
            </div>
            <p class="mt-4 text-center text-gray-800 font-semibold group-hover:text-gray-900 px-2"><%= product.name %></p>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </main>

</div>
